<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NFC Card | Authentication</title>
  <style>
    :root {
      --primary: #2563eb;
      --success: #16a34a;
      --danger: #dc2626;
      --bg: #f9fafb;
      --card-bg: #ffffff;
      --shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    body {
      margin: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg);
      font-family: 'Inter', system-ui, sans-serif;
    }

    .card {
      background: var(--card-bg);
      box-shadow: var(--shadow);
      border-radius: 12px;
      width: 360px;
      padding: 30px;
      text-align: center;
      transition: all 0.3s ease;
    }

    h2 {
      margin-bottom: 15px;
      color: #111827;
    }

    input {
      width: 100%;
      padding: 10px;
      margin: 8px 0 16px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 15px;
    }

    button {
      width: 100%;
      padding: 10px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 15px;
      cursor: pointer;
    }

    button:hover {
      background: #1e40af;
    }

    .link {
      color: var(--primary);
      cursor: pointer;
      text-decoration: underline;
      font-size: 14px;
    }

    .hidden {
      display: none;
    }

    .message {
      font-size: 14px;
      margin: 10px 0;
    }

    .success { color: var(--success); }
    .error { color: var(--danger); }

    .timer {
      font-size: 13px;
      color: #6b7280;
      margin-top: 5px;
    }
  </style>
</head>

<body>
  <div class="card">
    <!-- LOGIN SCREEN -->
    <div id="login-step">
      <h2>Login</h2>
      <input type="email" id="login-email" placeholder="Email" required />
      <input type="password" id="login-password" placeholder="Password" required />
      <button id="login-btn">Login</button>
      <p class="message">Donâ€™t have an account? 
        <span class="link" id="go-to-signup">Create one</span>
      </p>
    </div>

    <!-- SIGNUP: STEP 1 - EMAIL -->
    <div id="signup-email-step" class="hidden">
      <h2>Create Account</h2>
      <input type="email" id="signup-email" placeholder="Enter your email" required />
      <button id="send-code-btn">Continue</button>
      <p class="message"><span class="link" id="go-back-login1">Back to Login</span></p>
    </div>

    <!-- SIGNUP: STEP 2 - CODE VERIFICATION -->
    <div id="signup-code-step" class="hidden">
      <h2>Email Verification</h2>
      <p class="message">A verification code has been sent to your email.</p>
      <input type="text" id="verify-code" placeholder="Enter 6-digit code" maxlength="6" required />
      <button id="verify-btn">Verify</button>
      <p class="timer" id="timer">Code expires in: 60s</p>
      <p class="message"><span class="link" id="resend-code">Resend code</span></p>
    </div>

    <!-- SIGNUP: STEP 3 - PASSWORD SETUP -->
    <div id="signup-password-step" class="hidden">
      <h2>Set Your Password</h2>
      <input type="password" id="signup-pass" placeholder="Password" required />
      <input type="password" id="signup-confirm-pass" placeholder="Confirm Password" required />
      <button id="create-account-btn">Create Account</button>
      <p class="message"><span class="link" id="go-back-login2">Back to Login</span></p>
    </div>

    <p id="status-msg" class="message"></p>
  </div>

  <script>
    // --- Element References ---
    const loginStep = document.getElementById("login-step");
    const signupEmailStep = document.getElementById("signup-email-step");
    const signupCodeStep = document.getElementById("signup-code-step");
    const signupPasswordStep = document.getElementById("signup-password-step");

    const goToSignup = document.getElementById("go-to-signup");
    const goBackLogin1 = document.getElementById("go-back-login1");
    const goBackLogin2 = document.getElementById("go-back-login2");
    const sendCodeBtn = document.getElementById("send-code-btn");
    const verifyBtn = document.getElementById("verify-btn");
    const resendCodeBtn = document.getElementById("resend-code");
    const createAccountBtn = document.getElementById("create-account-btn");
    const timerDisplay = document.getElementById("timer");
    const statusMsg = document.getElementById("status-msg");

    // --- Mock Variables ---
    let verificationCode = "";
    let timer;
    let timeLeft = 60;

    // --- Helper Functions ---
    function showStep(step) {
      [loginStep, signupEmailStep, signupCodeStep, signupPasswordStep].forEach(s => s.classList.add("hidden"));
      step.classList.remove("hidden");
      statusMsg.textContent = "";
    }

    function showMessage(msg, type = "") {
      statusMsg.textContent = msg;
      statusMsg.className = "message " + type;
    }

    function startTimer() {
      timeLeft = 60;
      timerDisplay.textContent = `Code expires in: ${timeLeft}s`;
      timer = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = `Code expires in: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          showMessage("Code expired. Please resend.", "error");
        }
      }, 1000);
    }

    // --- Event Listeners ---
    goToSignup.onclick = () => showStep(signupEmailStep);
    goBackLogin1.onclick = () => showStep(loginStep);
    goBackLogin2.onclick = () => showStep(loginStep);

    sendCodeBtn.onclick = () => {
      const email = document.getElementById("signup-email").value;
      if (!email.includes("@")) {
        showMessage("Enter a valid email address.", "error");
        return;
      }
      verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
      console.log("Mock code:", verificationCode); // for demo
      showStep(signupCodeStep);
      showMessage("Verification code sent to your email.", "success");
      clearInterval(timer);
      startTimer();
    };

    verifyBtn.onclick = () => {
      const entered = document.getElementById("verify-code").value.trim();
      if (entered === verificationCode && timeLeft > 0) {
        clearInterval(timer);
        showStep(signupPasswordStep);
        showMessage("Email verified! Set your password.", "success");
      } else {
        showMessage("Invalid or expired code.", "error");
      }
    };

    resendCodeBtn.onclick = () => {
      verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
      console.log("New code:", verificationCode);
      showMessage("New verification code sent.", "success");
      clearInterval(timer);
      startTimer();
    };

    createAccountBtn.onclick = () => {
      const pass = document.getElementById("signup-pass").value;
      const confirm = document.getElementById("signup-confirm-pass").value;
      if (pass.length < 8) return showMessage("Password must be at least 8 characters.", "error");
      if (pass !== confirm) return showMessage("Passwords do not match.", "error");
      showMessage("Account created successfully! Please log in.", "success");
      setTimeout(() => showStep(loginStep), 2000);
    };
  </script>
</body>
</html>
