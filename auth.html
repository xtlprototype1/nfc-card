<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NFC Business Card – Sign In</title>
<style>
  :root {
    --bg: #f7f5f0;
    --card: #fffaf4;
    --accent: #c9a46a;
    --accent-dark: #a88652;
    --text: #3e3e3e;
    --error: #d9534f;
  }
  body {
    margin: 0;
    height: 100vh;
    background: var(--bg);
    font-family: "Poppins", sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text);
  }
  .card {
    width: 360px;
    background: var(--card);
    border-radius: 18px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    padding: 2rem;
    transition: all 0.3s ease;
  }
  h2 {
    margin-top: 0;
    text-align: center;
    font-weight: 500;
    color: var(--accent-dark);
  }
  .input-group {
    margin-bottom: 1.2rem;
  }
  input {
    width: 100%;
    padding: 0.8rem;
    border-radius: 8px;
    border: 1px solid #ddd;
    background: #fff;
    font-size: 0.95rem;
    box-sizing: border-box;
  }
  input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent);
  }
  button {
    width: 100%;
    padding: 0.9rem;
    border: none;
    border-radius: 8px;
    background: var(--accent);
    color: white;
    font-size: 1rem;
    cursor: pointer;
    transition: opacity 0.2s ease;
  }
  button:hover {
    opacity: 0.85; /* no color change */
  }
  .link {
    text-align: center;
    margin-top: 1rem;
    font-size: 0.9rem;
  }
  .link a {
    color: var(--accent-dark);
    text-decoration: none;
  }
  .link a:hover {
    text-decoration: underline;
  }
  .hidden { display: none; }
  .timer {
    text-align: center;
    margin-top: 0.5rem;
    font-size: 0.85rem;
    color: #999;
  }
  .error {
    color: var(--error);
    font-size: 0.85rem;
    margin-bottom: 0.5rem;
    text-align: center;
  }
</style>
</head>
<body>
  <div class="card">
    <h2 id="formTitle">Login</h2>

    <div id="loginForm">
      <div class="input-group">
        <input type="email" id="loginEmail" placeholder="Email" required />
      </div>
      <div class="input-group">
        <input type="password" id="loginPassword" placeholder="Password" required />
      </div>
      <div class="error" id="loginError"></div>
      <button id="loginBtn">Login</button>
      <div class="link">Don’t have an account? <a href="#" id="createLink">Create one</a></div>
    </div>

    <div id="signupStep1" class="hidden">
      <div class="input-group">
        <input type="email" id="signupEmail" placeholder="Enter your email" required />
      </div>
      <div class="error" id="emailError"></div>
      <button id="continueBtn">Continue</button>
      <div class="link"><a href="#" id="backToLogin1">Back to login</a></div>
    </div>

    <div id="signupStep2" class="hidden">
      <div class="input-group">
        <input type="text" id="verifyCode" placeholder="Enter verification code" maxlength="6" />
      </div>
      <div class="error" id="codeError"></div>
      <button id="verifyBtn">Verify</button>
      <div class="timer" id="timer">01:00</div>
      <div class="link hidden" id="resendContainer">
        <a href="#" id="resendCode">Resend code</a>
      </div>
    </div>

    <div id="signupStep3" class="hidden">
      <div class="input-group">
        <input type="password" id="password" placeholder="Password" />
      </div>
      <div class="input-group">
        <input type="password" id="confirmPassword" placeholder="Confirm Password" />
      </div>
      <div class="error" id="passwordError"></div>
      <button id="createAccountBtn">Create Account</button>
      <div class="link"><a href="#" id="backToLogin2">Back to login</a></div>
    </div>
  </div>

<script>
  const loginForm = document.getElementById("loginForm");
  const signup1 = document.getElementById("signupStep1");
  const signup2 = document.getElementById("signupStep2");
  const signup3 = document.getElementById("signupStep3");
  const formTitle = document.getElementById("formTitle");

  const createLink = document.getElementById("createLink");
  const backToLogin1 = document.getElementById("backToLogin1");
  const backToLogin2 = document.getElementById("backToLogin2");

  const continueBtn = document.getElementById("continueBtn");
  const verifyBtn = document.getElementById("verifyBtn");
  const createAccountBtn = document.getElementById("createAccountBtn");

  const emailInput = document.getElementById("signupEmail");
  const emailError = document.getElementById("emailError");
  const codeError = document.getElementById("codeError");
  const passwordError = document.getElementById("passwordError");

  const timerDisplay = document.getElementById("timer");
  const resendContainer = document.getElementById("resendContainer");
  const resendCodeBtn = document.getElementById("resendCode");

  let generatedCode = "";
  let timer;
  let timeLeft = 60;

  function switchTo(view) {
    [loginForm, signup1, signup2, signup3].forEach(el => el.classList.add("hidden"));
    view.classList.remove("hidden");
  }

  createLink.onclick = () => {
    switchTo(signup1);
    formTitle.textContent = "Create Account";
  };
  backToLogin1.onclick = backToLogin2.onclick = () => {
    switchTo(loginForm);
    formTitle.textContent = "Login";
  };

  continueBtn.onclick = () => {
    const email = emailInput.value.trim();
    if (!validateEmail(email)) {
      emailError.textContent = "Please enter a valid email address.";
      return;
    }
    emailError.textContent = "";
    sendVerificationCode(email);
    switchTo(signup2);
    formTitle.textContent = "Verify Email";
  };

  verifyBtn.onclick = () => {
    const code = document.getElementById("verifyCode").value.trim();
    if (code === generatedCode && code !== "") {
      clearInterval(timer);
      timerDisplay.textContent = "";
      resendContainer.classList.add("hidden");
      codeError.textContent = "";
      switchTo(signup3);
      formTitle.textContent = "Set Password";
    } else {
      codeError.textContent = "Invalid or expired verification code.";
    }
  };

  createAccountBtn.onclick = () => {
    const pass = document.getElementById("password").value;
    const confirm = document.getElementById("confirmPassword").value;
    if (pass.length < 8) {
      passwordError.textContent = "Password must be at least 8 characters.";
      return;
    }
    if (pass !== confirm) {
      passwordError.textContent = "Passwords do not match.";
      return;
    }
    passwordError.textContent = "";
    alert("✅ Account created successfully!\nRedirecting to login...");
    switchTo(loginForm);
    formTitle.textContent = "Login";
  };

  function sendVerificationCode(email) {
    generatedCode = String(Math.floor(100000 + Math.random() * 900000));
    console.log("Verification code sent to", email, ":", generatedCode);
    timeLeft = 60;
    resendContainer.classList.add("hidden");
    updateTimer();
    timer = setInterval(updateTimer, 1000);
  }

  function updateTimer() {
    const mins = String(Math.floor(timeLeft / 60)).padStart(2, "0");
    const secs = String(timeLeft % 60).padStart(2, "0");
    timerDisplay.textContent = `${mins}:${secs}`;
    if (timeLeft <= 0) {
      clearInterval(timer);
      timerDisplay.textContent = "Code expired.";
      resendContainer.classList.remove("hidden");
    }
    timeLeft--;
  }

  resendCodeBtn.onclick = (e) => {
    e.preventDefault();
    sendVerificationCode(emailInput.value);
  };

  function validateEmail(email) {
    const regex = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/;
    return regex.test(email);
  }
</script>
</body>
</html>
